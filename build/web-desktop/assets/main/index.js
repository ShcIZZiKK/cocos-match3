System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var e,i,u,n,t,a,c;return{setters:[function(o){e=o.createClass},function(o){i=o.cclegacy,u=o.AudioClip,n=o.resources,t=o.Node,a=o.director,c=o.AudioSource}],execute:function(){i._RF.push({},"b335cIg/E5Hy5VJFvEANTQr","AudioManager",void 0),o("AudioManager",function(){function o(){this._audioSource=void 0;var o=new t;o.name="__audioManager__",a.getScene().addChild(o),a.addPersistRootNode(o),this._audioSource=o.addComponent(c)}var i=o.prototype;return i.playOneShot=function(o,e){var i=this;void 0===e&&(e=1),o instanceof u?this._audioSource.playOneShot(o,e):n.load(o,(function(o,u){o?console.log(o):i._audioSource.playOneShot(u,e)}))},i.play=function(o,e){var i=this;void 0===e&&(e=1),o instanceof u?(this._audioSource.clip=o,this._audioSource.play(),this.audioSource.volume=e):n.load(o,(function(o,u){o?console.log(o):(i._audioSource.clip=u,i._audioSource.play(),i.audioSource.volume=e)}))},i.stop=function(){this._audioSource.stop()},i.pause=function(){this._audioSource.pause()},i.resume=function(){this._audioSource.play()},e(o,[{key:"audioSource",get:function(){return this._audioSource}}],[{key:"instance",get:function(){return null==this._instance&&(this._instance=new o),this._instance}}]),o}())._instance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/Board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Item.ts","./AudioManager.ts","./ScoreManager.ts"],(function(t){var e,i,o,n,s,a,r,c,l,u,d,m,h,g,b,p,f,v,S,w,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.createClass},function(t){a=t.cclegacy,r=t._decorator,c=t.Prefab,l=t.Node,u=t.CCInteger,d=t.CCFloat,m=t.AudioClip,h=t.Vec3,g=t.Component,b=t.Input,p=t.UITransform,f=t.instantiate},function(t){v=t.Item,S=t.ItemState},function(t){w=t.AudioManager},function(t){B=t.ScoreManager}],execute:function(){var C,y,I,O,R,P,E,z,A,_,k,M,T,j,N,L,V,G,x,F,D,K,U,W,H,q,J,Q,X,Y,Z,$,tt,et,it,ot,nt,st,at,rt,ct,lt;a._RF.push({},"5d0e5yM+6FKyq6BhqRUdf8K","Board",void 0);var ut=r.ccclass,dt=r.property,mt=function(t){return t[t.BE_NONE=0]="BE_NONE",t[t.BE_BOMB=1]="BE_BOMB",t}(mt||{}),ht=function(t){return t[t.BS_PICK=0]="BS_PICK",t[t.BS_MOVE=1]="BS_MOVE",t[t.BS_REVERT=2]="BS_REVERT",t[t.BS_REMOVE=3]="BS_REMOVE",t[t.BS_REFILL=4]="BS_REFILL",t[t.BS_ANIMATION_FALING=5]="BS_ANIMATION_FALING",t[t.BS_BONUS_STACK=6]="BS_BONUS_STACK",t}(ht||{}),gt=t("Board",(C=ut("Board"),y=dt({group:{name:"Board nodes"},type:c,tooltip:"Префаб гема/фрукта"}),I=dt({group:{name:"Board nodes"},type:l,tooltip:"Блок фона"}),O=dt({group:{name:"Board nodes"},type:c,tooltip:"Префаб фона для гема/фрукта"}),R=dt({group:{name:"Board nodes"},type:l,tooltip:"Элемент курсора (выделение элемента)"}),P=dt({group:{name:"Board nodes"},type:B,tooltip:"Менеджер подсчёта очков"}),E=dt({group:{name:"Game settings"},type:u,tooltip:"Количество очков для победы"}),z=dt({group:{name:"Game settings"},type:u,tooltip:"Количество строк с гемами/фруктами"}),A=dt({group:{name:"Game settings"},type:u,tooltip:"Количество столбцов с гемами/фруктами"}),_=dt({group:{name:"Game settings"},type:u,range:[1,10,1],slide:!0,tooltip:"Колечество вариантов гемов/фруктов"}),k=dt({group:{name:"Game settings"},type:u,tooltip:"Размер ячейки/гема"}),M=dt({group:{name:"Game settings"},type:u,tooltip:"Отступ между элементами"}),T=dt({group:{name:"Game settings"},type:d,tooltip:"Скорость анимация смещения гема"}),j=dt({group:{name:"Game settings"},type:d,tooltip:"Скорость анимации падения гема"}),N=dt({group:{name:"Audio settings"},type:m,tooltip:"Основная музыка для игры"}),L=dt({group:{name:"Audio settings"},type:m,tooltip:"Звук смещения элементов"}),V=dt({group:{name:"Audio settings"},type:m,tooltip:"Звук сбора элементов 3+"}),G=dt({group:{name:"Audio settings"},type:m,tooltip:"Звук сбора бомбы"}),x=dt({group:{name:"Audio settings"},type:m,tooltip:"Звук взрыва бомбы"}),F=dt({group:{name:"Audio settings"},type:m,tooltip:"Звук при выигрыше в раунде"}),C(((lt=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,o(e,"itemPrefab",U,n(e)),o(e,"backgroundBoard",W,n(e)),o(e,"tilePrefab",H,n(e)),o(e,"cursor",q,n(e)),o(e,"scoreManager",J,n(e)),o(e,"winScore",Q,n(e)),o(e,"countRows",X,n(e)),o(e,"countCols",Y,n(e)),o(e,"itemVariantCount",Z,n(e)),o(e,"itemSize",$,n(e)),o(e,"padding",tt,n(e)),o(e,"switchSpeed",et,n(e)),o(e,"fallSpeed",it,n(e)),o(e,"gameplayMusic",ot,n(e)),o(e,"switchSound",nt,n(e)),o(e,"stackSound",st,n(e)),o(e,"createBombSound",at,n(e)),o(e,"explosionBombSound",rt,n(e)),o(e,"winSound",ct,n(e)),e.itemSizeWithPadding=0,e.emptyId=-1,e.grid=[],e.fallItems=[],e.isRevertMove=!1,e.stack=!1,e.boardGenerator=void 0,e.boardItems=void 0,e.boardAnimations=void 0,e.moveItems=void 0,e}i(e,t);var s=e.prototype;return s.start=function(){var t=this;this.itemSizeWithPadding=this.itemSize+this.padding,this.itemPrefab.data.getComponent(v).setParent(this.node),e.audioManager=w.instance,e.audioManager&&this.gameplayMusic&&e.audioManager.play(this.gameplayMusic,.8),this.scoreManager&&(this.scoreManager.winScore=this.winScore),bt.setGridSize(this.countRows,this.countCols),pt.setGridSize(this.countRows,this.countCols);var i={backgroundBoard:this.backgroundBoard,countCols:this.countCols,countRows:this.countRows,cellSize:this.itemSizeWithPadding,padding:this.padding,itemVariantCount:this.itemVariantCount,parentNode:this.node,itemPrefab:this.itemPrefab,tilePrefab:this.tilePrefab};this.boardGenerator=new ft(i),this.boardGenerator.setBackgroudSize(),this.boardGenerator.createGrid(),this.grid=this.boardGenerator.getGrid();var o={switchSound:this.switchSound,countCols:this.countCols,countRows:this.countRows,emptyId:this.emptyId,bombId:pt.bombId,cellSize:this.itemSizeWithPadding,cursor:this.cursor};this.boardItems=new vt(o),this.boardItems.grid=this.grid,this.boardItems.generateEvents();var n={cellSize:this.itemSizeWithPadding,switchAnimation:{currentTime:0,speed:this.switchSpeed,callbacks:{revert:function(){t.onSwitchEnd()},end:function(){e.boardStage=ht.BS_REVERT,t.stack=!0,t.checkAfterSwitch()}}},fallAnimation:{currentTime:0,speed:this.fallSpeed,callbacks:{end:function(){e.boardStage=ht.BS_REFILL,t.fallItems=[],t.checkAfterSwitch()}}},moveAnimation:{currentTime:0,speed:.15,callbacks:{end:function(){t.moveItems=[],t.grid[pt.bombPosition.row][pt.bombPosition.col].item.getComponent(v).setItemData(pt.bombId,!0),pt.bombPosition.row=-1,pt.bombPosition.col=-1,e.boardStage=ht.BS_REMOVE,t.revertItems(),t.checkAfterSwitch()}}}};this.boardAnimations=new St(n)},s.update=function(t){e.boardStage===ht.BS_MOVE&&this.boardAnimations&&this.boardAnimations.switch(t,this.grid,this.isRevertMove),e.boardStage===ht.BS_ANIMATION_FALING&&this.boardAnimations&&this.boardAnimations.fall(t,this.fallItems),e.boardStage===ht.BS_BONUS_STACK&&this.boardAnimations&&this.boardAnimations.moveToTarget(t,this.moveItems)},s.onSwitchEnd=function(){var t;e.gameObject.selectedRow=this.emptyId,this.isRevertMove=!1,this.grid.forEach((function(t){t.forEach((function(t){t.value!==pt.bombId&&t.item.getComponent(v).changeState(S.STATE_DEFAULT)}))})),e.boardStage=ht.BS_PICK,null!=(t=this.scoreManager)&&t.isWin&&(this.node.active=!1,e.audioManager&&this.winSound&&(e.audioManager.stop(),e.audioManager.playOneShot(this.winSound))),console.log(this.grid)},s.onCreateBomb=function(t){this.moveItems=t,e.boardStage=ht.BS_BONUS_STACK,e.audioManager&&this.createBombSound&&e.audioManager.playOneShot(this.createBombSound,.5)},s.checkAfterSwitch=function(){var t=this;if(e.boardStage!==ht.BS_REMOVE)if(e.boardStage!==ht.BS_REFILL)if(e.gameObject.selectedType!==mt.BE_BOMB&&e.gameObject.secondType!==mt.BE_BOMB){var i=pt.isStackBomb(this.grid,e.gameObject.selectedRow,e.gameObject.selectedCol),o=pt.isStackBomb(this.grid,e.gameObject.secondSelectedRow,e.gameObject.secondSelectedCol);if(i||o)return i&&pt.createBomb(this.grid,e.gameObject.selectedRow,e.gameObject.selectedCol,this.emptyId,this.onCreateBomb.bind(this)),void(o&&pt.createBomb(this.grid,e.gameObject.secondSelectedRow,e.gameObject.secondSelectedCol,this.emptyId,this.onCreateBomb.bind(this)));var n=bt.isLineStacking(this.grid,e.gameObject.selectedRow,e.gameObject.selectedCol),s=bt.isLineStacking(this.grid,e.gameObject.secondSelectedRow,e.gameObject.secondSelectedCol);if(!n&&!s)return this.isRevertMove=!0,e.boardStage=ht.BS_MOVE,void(e.audioManager&&this.switchSound&&e.audioManager.playOneShot(this.switchSound,.5));e.boardStage=ht.BS_REMOVE,n&&this.removeItems(e.gameObject.selectedRow,e.gameObject.selectedCol),s&&this.removeItems(e.gameObject.secondSelectedRow,e.gameObject.secondSelectedCol),this.hideRemoveItems()}else{var a=function(){t.hideRemoveItems(t.explosionBombSound)};e.gameObject.selectedType===mt.BE_BOMB?pt.explosionBomb(this.grid,e.gameObject.secondSelectedRow,e.gameObject.secondSelectedCol,this.emptyId,a):pt.explosionBomb(this.grid,e.gameObject.selectedRow,e.gameObject.selectedCol,this.emptyId,a)}else this.createNewItems();else this.checkFalling()},s.removeItems=function(t,e){var i=this.grid[t][e].value,o=t;if(bt.isVerticalLineStacking(this.grid,t,e)){for(;o>0&&this.grid[o-1][e].value==i;)this.grid[o-1][e].value=this.emptyId,o--;for(o=t;o<this.countRows-1&&this.grid[o+1][e].value==i;)this.grid[o+1][e].value=this.emptyId,o++}if(bt.isHorizontalLineStacking(this.grid,t,e)){for(o=e;o>0&&this.grid[t][o-1].value==i;)this.grid[t][o-1].value=this.emptyId,o--;for(o=e;o<this.countCols-1&&this.grid[t][o+1].value==i;)this.grid[t][o+1].value=this.emptyId,o++}this.grid[t][e].value=this.emptyId},s.hideRemoveItems=function(t){void 0===t&&(t=null);for(var i=0;i<this.countRows;i++)for(var o=0;o<this.countCols;o++)this.grid[i][o].value===this.emptyId&&(this.grid[i][o].item.getComponent(v).playAnimationDead(),this.scoreManager.addScore(1));if(e.audioManager){var n,s=null!=(n=t)?n:this.stackSound;s&&e.audioManager.playOneShot(s,.5)}this.revertItems(),this.checkAfterSwitch()},s.revertItems=function(){if(this.stack){var t=e.gameObject,i=t.selectedRow,o=t.selectedCol,n=t.secondSelectedRow,s=t.secondSelectedCol,a=this.grid[i][o].row,r=this.grid[i][o].col;this.grid[i][o].row=this.grid[n][s].row,this.grid[i][o].col=this.grid[n][s].col,this.grid[n][s].row=a,this.grid[n][s].col=r,this.stack=!1}},s.checkFalling=function(){for(var t=0,i=0;i<this.countCols;i++)for(var o=this.countRows-1;o>0;o--)if(this.grid[o][i].value===this.emptyId&&this.grid[o-1][i].value>=0){this.grid[o][i].value=this.grid[o-1][i].value,this.grid[o-1][i].value=this.emptyId,this.grid[o][i].item.setPosition(this.grid[o-1][i].item.getPosition()),this.grid[o-1][i].item.getComponent(v).hideBody();var n=this.grid[o][i].value===pt.bombId;this.grid[o][i].item.getComponent(v).setItemData(this.grid[o][i].value,n),this.fallItems.push({item:this.grid[o][i].item,position:this.grid[o][i].item.getPosition()}),t++}0===t?(e.boardStage=ht.BS_REFILL,this.checkAfterSwitch()):e.boardStage=ht.BS_ANIMATION_FALING},s.createNewItems=function(){for(var t=this,i=0,o=0;o<this.countCols;o++){var n=this.grid[0][o];n.value===this.emptyId&&(n.value=Math.floor(Math.random()*this.itemVariantCount),n.item.getComponent(v).setItemData(n.value),i++)}if(i)e.boardStage,ht.BS_REMOVE,this.checkFalling();else{var s=!1;if(this.grid.forEach((function(e){e.forEach((function(e){e.value===t.emptyId&&(s=!0)}))})),s)return e.boardStage,ht.BS_REMOVE,void this.checkFalling();for(var a=!1,r=0;r<this.countRows;r++){for(var c=0;c<this.countCols;c++)if(pt.isStackBomb(this.grid,r,c)){pt.createBomb(this.grid,r,c,this.emptyId,this.onCreateBomb.bind(this)),a=!0;break}if(a)break}if(a)return;for(var l=0,u=0;u<this.countRows;u++)for(var d=0;d<this.countCols;d++)this.grid[u][d].value!==pt.bombId&&(d<=this.countCols-3&&this.grid[u][d].value===this.grid[u][d+1].value&&this.grid[u][d].value===this.grid[u][d+2].value&&(l++,this.removeItems(u,d)),u<=this.countRows-3&&this.grid[u][d].value===this.grid[u+1][d].value&&this.grid[u][d].value===this.grid[u+2][d].value&&(l++,this.removeItems(u,d)));l>0?(e.boardStage,ht.BS_REMOVE,this.scoreManager.addCombo(),this.scheduleOnce((function(){t.hideRemoveItems()}),.2)):this.onSwitchEnd()}},e}(g)).boardStage=ht.BS_PICK,lt.audioManager=void 0,lt.gameObject={selectedRow:-1,selectedCol:-1,selectedPosition:new h(0,0,0),secondSelectedRow:0,secondSelectedCol:0,secondSelectedPosition:new h(0,0,0),yOffset:0,xOffset:0,selectedType:mt.BE_NONE,secondType:mt.BE_NONE},U=e((K=lt).prototype,"itemPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(K.prototype,"backgroundBoard",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(K.prototype,"tilePrefab",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(K.prototype,"cursor",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(K.prototype,"scoreManager",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(K.prototype,"winScore",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),X=e(K.prototype,"countRows",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),Y=e(K.prototype,"countCols",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),Z=e(K.prototype,"itemVariantCount",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),$=e(K.prototype,"itemSize",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 64}}),tt=e(K.prototype,"padding",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),et=e(K.prototype,"switchSpeed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),it=e(K.prototype,"fallSpeed",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),ot=e(K.prototype,"gameplayMusic",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(K.prototype,"switchSound",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(K.prototype,"stackSound",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(K.prototype,"createBombSound",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(K.prototype,"explosionBombSound",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(K.prototype,"winSound",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=K))||D)),bt=function(){function t(){}return t.setGridSize=function(e,i){t.countRows=e||0,t.countCols=i||0},t.isLineStacking=function(e,i,o){return e[i][o].value!==pt.bombId&&(t.isVerticalLineStacking(e,i,o)||t.isHorizontalLineStacking(e,i,o))},t.isVerticalLineStacking=function(e,i,o){for(var n=e[i][o].value,s=0,a=i;a>0&&e[a-1][o].value==n;)s++,a--;for(a=i;a<t.countRows-1&&e[a+1][o].value==n;)s++,a++;return s>1},t.isHorizontalLineStacking=function(e,i,o){for(var n=e[i][o].value,s=0,a=o;a>0&&e[i][a-1].value==n;)s++,a--;for(a=o;a<t.countCols-1&&e[i][a+1].value==n;)s++,a++;return s>1},t}();bt.countRows=0,bt.countCols=0;var pt=function(){function t(){}return t.setGridSize=function(e,i){t.countRows=e||0,t.countCols=i||0},t.isStackBomb=function(e,i,o){var n=o+1!==t.countCols&&e[i][o].value===e[i][o+1].value,s=0!==o&&e[i][o].value===e[i][o-1].value;if(!n&&!s)return!1;var a=i+1!==t.countRows&&e[i][o].value===e[i+1][o].value,r=0!==i&&e[i][o].value===e[i-1][o].value;return!(!a&&!r)&&(t.isStackBombRightBottom(e,i,o)||t.isStackBombRightTop(e,i,o)||t.isStackBombLeftBottom(e,i,o)||t.isStackBombLeftTop(e,i,o))},t.isStackBombRightBottom=function(e,i,o){var n=o+1!==t.countCols&&e[i][o].value===e[i][o+1].value,s=i+1!==t.countRows&&e[i][o].value===e[i+1][o].value,a=!(!n||!s)&&e[i][o].value===e[i+1][o+1].value;return n&&s&&a},t.isStackBombRightTop=function(e,i,o){var n=o+1!==t.countCols&&e[i][o].value===e[i][o+1].value,s=0!==i&&e[i][o].value===e[i-1][o].value,a=!(!n||!s)&&e[i][o].value===e[i-1][o+1].value;return n&&s&&a},t.isStackBombLeftBottom=function(e,i,o){var n=0!==o&&e[i][o].value===e[i][o-1].value,s=i+1!==t.countRows&&e[i][o].value===e[i+1][o].value,a=!(!n||!s)&&e[i][o].value===e[i+1][o-1].value;return n&&s&&a},t.isStackBombLeftTop=function(t,e,i){var o=0!==i&&t[e][i].value===t[e][i-1].value,n=0!==e&&t[e][i].value===t[e-1][i].value,s=!(!o||!n)&&t[e][i].value===t[e-1][i-1].value;return o&&n&&s},t.createBomb=function(e,i,o,n,s){var a=[],r=!1;switch(!0){case t.isStackBombRightBottom(e,i,o):e[i][o+1].value=n,e[i+1][o].value=n,e[i+1][o+1].value=n,a.push({position:e[i][o+1].item.getPosition(),target:e[i][o].item.getPosition().subtract(e[i][o+1].item.getPosition()),item:e[i][o+1].item}),a.push({position:e[i+1][o].item.getPosition(),target:e[i][o].item.getPosition().subtract(e[i+1][o].item.getPosition()),item:e[i+1][o].item}),a.push({position:e[i+1][o+1].item.getPosition(),target:e[i][o].item.getPosition().subtract(e[i+1][o+1].item.getPosition()),item:e[i+1][o+1].item}),r=!0;break;case t.isStackBombRightTop(e,i,o):e[i][o+1].value=n,e[i-1][o].value=n,e[i-1][o+1].value=n,a.push({position:e[i][o+1].item.getPosition(),target:e[i][o].item.getPosition().subtract(e[i][o+1].item.getPosition()),item:e[i][o+1].item}),a.push({position:e[i-1][o].item.getPosition(),target:e[i][o].item.getPosition().subtract(e[i-1][o].item.getPosition()),item:e[i-1][o].item}),a.push({position:e[i-1][o+1].item.getPosition(),target:e[i][o].item.getPosition().subtract(e[i-1][o+1].item.getPosition()),item:e[i-1][o+1].item}),r=!0;break;case t.isStackBombLeftBottom(e,i,o):e[i][o-1].value=n,e[i+1][o].value=n,e[i+1][o-1].value=n,a.push({position:e[i][o-1].item.getPosition(),target:e[i][o].item.getPosition().subtract(e[i][o-1].item.getPosition()),item:e[i][o-1].item}),a.push({position:e[i+1][o].item.getPosition(),target:e[i][o].item.getPosition().subtract(e[i+1][o].item.getPosition()),item:e[i+1][o].item}),a.push({position:e[i+1][o-1].item.getPosition(),target:e[i][o].item.getPosition().subtract(e[i+1][o-1].item.getPosition()),item:e[i+1][o-1].item}),r=!0;break;case t.isStackBombLeftTop(e,i,o):e[i][o-1].value=n,e[i-1][o].value=n,e[i-1][o-1].value=n,a.push({position:e[i][o-1].item.getPosition(),target:e[i][o].item.getPosition().subtract(e[i][o-1].item.getPosition()),item:e[i][o-1].item}),a.push({position:e[i-1][o].item.getPosition(),target:e[i][o].item.getPosition().subtract(e[i-1][o].item.getPosition()),item:e[i-1][o].item}),a.push({position:e[i-1][o-1].item.getPosition(),target:e[i][o].item.getPosition().subtract(e[i-1][o-1].item.getPosition()),item:e[i-1][o-1].item}),r=!0}r&&(t.bombPosition.row=i,t.bombPosition.col=o,e[i][o].value=t.bombId,s(a))},t.explosionBomb=function(e,i,o,n,s){var a=[];e[i][o].value=n,o+1!==t.countCols&&(e[i][o+1].value===t.bombId&&a.push({row:i,col:o+1}),e[i][o+1].value=n),0!==o&&(e[i][o-1].value===t.bombId&&a.push({row:i,col:o-1}),e[i][o-1].value=n),i+1!==t.countRows&&(e[i+1][o].value===t.bombId&&a.push({row:i+1,col:o}),e[i+1][o].value=n),0!==i&&(e[i-1][o].value===t.bombId&&a.push({row:i-1,col:o}),e[i-1][o].value=n),o+1!==t.countCols&&i+1!==t.countRows&&(e[i+1][o+1].value===t.bombId&&a.push({row:i+1,col:o+1}),e[i+1][o+1].value=n),0!==o&&i+1!==t.countRows&&(e[i+1][o-1].value===t.bombId&&a.push({row:i+1,col:o-1}),e[i+1][o-1].value=n),0!==o&&0!==i&&(e[i-1][o-1].value===t.bombId&&a.push({row:i-1,col:o-1}),e[i-1][o-1].value=n),o+1!==t.countCols&&0!==i&&(e[i-1][o+1].value===t.bombId&&a.push({row:i-1,col:o+1}),e[i-1][o+1].value=n),gt.gameObject.selectedType=mt.BE_NONE,gt.gameObject.secondType=mt.BE_NONE,a.length?t.explosionBomb(e,a[0].row,a[0].col,n,s):(gt.boardStage=ht.BS_REMOVE,s())},t}();pt.bombId=100,pt.bombPosition={row:-1,col:-1},pt.countRows=0,pt.countCols=0;var ft=function(){function t(t){this.grid=[],this.backgroundBoard=null,this.countCols=0,this.countRows=0,this.cellSize=0,this.padding=0,this.emptyId=-1,this.itemVariantCount=0,this.parentNode=void 0,this.itemPrefab=void 0,this.tilePrefab=void 0,this.backgroundBoard=t.backgroundBoard,this.countCols=t.countCols||0,this.countRows=t.countRows||0,this.cellSize=t.cellSize||0,this.padding=t.padding||0,this.itemVariantCount=t.itemVariantCount||0,this.parentNode=t.parentNode,this.itemPrefab=t.itemPrefab,this.tilePrefab=t.tilePrefab}var e=t.prototype;return e.setBackgroudSize=function(){if(this.backgroundBoard){var t=this.countCols*this.cellSize+this.countCols*this.padding,e=this.countRows*this.cellSize+this.countRows*this.padding;this.backgroundBoard.getComponent(p).setContentSize(t,e)}},e.createGrid=function(){for(var t=0;t<this.countRows;t++){this.grid[t]=[];for(var e=0;e<this.countCols;e++)this.grid[t][e]={size:this.cellSize-this.padding,value:this.emptyId,row:t,col:e}}for(var i=-this.cellSize*this.countCols/2-this.cellSize/2,o=this.cellSize*this.countRows/2-this.cellSize/2,n=i,s=0;s<this.countRows;s++){for(var a=0;a<this.countCols;a++){var r=this.grid[s][a];for(i+=this.cellSize,r.value=Math.floor(Math.random()*this.itemVariantCount);bt.isLineStacking(this.grid,s,a)||pt.isStackBomb(this.grid,s,a);)r.value=Math.floor(Math.random()*this.itemVariantCount);this.spawnTile(i,o);var c=this.spawnItem(i,o),l=c.getComponent(v);l.setItemData(r.value),l.setBodySize(r.size),r.item=c}i=n,o-=this.cellSize}},e.getGrid=function(){return this.grid},e.spawnItem=function(t,e){if(this.itemPrefab){var i=f(this.itemPrefab);return this.parentNode.addChild(i),i.setPosition(t,e,0),i}},e.spawnTile=function(t,e){if(this.tilePrefab&&this.backgroundBoard){var i=f(this.tilePrefab),o=i.getComponent(p);this.backgroundBoard.addChild(i),i.setPosition(t,e,0),o.setContentSize(this.cellSize,this.cellSize)}},t}(),vt=function(){function t(t){this._grid=[],this.switchSound=void 0,this.countCols=0,this.countRows=0,this.emptyId=-1,this.bombId=100,this.cellSize=0,this.cursor=void 0,this.switchSound=t.switchSound,this.countCols=t.countCols,this.countRows=t.countRows,this.emptyId=t.emptyId,this.bombId=t.bombId,this.cellSize=t.cellSize,this.cursor=t.cursor}var e=t.prototype;return e.generateEvents=function(){var t=this;this._grid.forEach((function(e){e.forEach((function(e){e.item.on(b.EventType.MOUSE_DOWN,(function(){t.onItemClick(e)}),t)}))}))},e.onItemClick=function(t){if(gt.boardStage===ht.BS_PICK){var e=t.row,i=t.col;if(!(gt.gameObject.selectedRow===e&&gt.gameObject.selectedCol===i))if(gt.gameObject.selectedRow!==this.emptyId){var o=1===Math.abs(gt.gameObject.selectedRow-e)&&gt.gameObject.selectedCol===i,n=1===Math.abs(gt.gameObject.selectedCol-i)&&gt.gameObject.selectedRow===e;if(o||n)return this.saveGameObjectData(e,i),this.hideCursor(),gt.audioManager&&this.switchSound&&gt.audioManager.playOneShot(this.switchSound,.5),void(gt.boardStage=ht.BS_MOVE);this.itemSelected(t)}else this.itemSelected(t)}},e.itemSelected=function(t){gt.gameObject.selectedRow=t.row,gt.gameObject.selectedCol=t.col,this._grid.forEach((function(t){t.forEach((function(t){t.value!==pt.bombId&&t.item.getComponent(v).changeState(S.STATE_DEFAULT)}))})),this._grid[t.row][t.col].value!==pt.bombId&&t.item.getComponent(v).changeState(S.STATE_SELECTED),this.showCursor()},e.showCursor=function(){if(this.cursor){var t=-this.cellSize*this.countCols/2-this.cellSize/2+this.cellSize*(gt.gameObject.selectedCol+1),e=this.cellSize*this.countRows/2-this.cellSize/2-this.cellSize*gt.gameObject.selectedRow;this.cursor.setPosition(t,e),this.cursor.setScale(1,1)}},e.hideCursor=function(){this.cursor.setScale(0,0)},e.saveGameObjectData=function(t,e){gt.gameObject.secondSelectedCol=e,gt.gameObject.secondSelectedRow=t,gt.gameObject.yOffset=gt.gameObject.selectedRow-t,gt.gameObject.xOffset=gt.gameObject.selectedCol-e,gt.gameObject.selectedPosition=this._grid[gt.gameObject.selectedRow][gt.gameObject.selectedCol].item.getPosition(),gt.gameObject.secondSelectedPosition=this._grid[t][e].item.getPosition(),this._grid[t][e].value===pt.bombId?gt.gameObject.secondType=mt.BE_BOMB:gt.gameObject.secondType=mt.BE_NONE,this._grid[gt.gameObject.selectedRow][gt.gameObject.selectedCol].value===pt.bombId?gt.gameObject.selectedType=mt.BE_BOMB:gt.gameObject.selectedType=mt.BE_NONE},s(t,[{key:"grid",get:function(){return this._grid},set:function(t){this._grid=t}}]),t}(),St=function(){function t(t){this.cellSize=0,this.switchAnimation={currentTime:0,speed:.5,callbacks:null},this.fallAnimation={currentTime:0,speed:.5,callbacks:null},this.moveAnimation={currentTime:0,speed:.5,callbacks:null},this.cellSize=t.cellSize,this.switchAnimation=t.switchAnimation,this.fallAnimation=t.fallAnimation,this.moveAnimation=t.moveAnimation}var e=t.prototype;return e.switch=function(t,e,i){var o=gt.gameObject,n=o.selectedRow,s=o.selectedCol,a=o.secondSelectedRow,r=o.secondSelectedCol,c=o.secondSelectedPosition,l=o.selectedPosition,u=o.xOffset,d=o.yOffset,m=e[n][s].item,g=e[a][r].item;if(this.switchAnimation.currentTime+=t,this.switchAnimation.currentTime>this.switchAnimation.speed){gt.boardStage=ht.BS_REVERT,this.switchAnimation.currentTime=0;var b=e[n][s];e[n][s]=e[a][r],e[a][r]=b;var p,f,v=new h(l.x+-1*u*this.cellSize,l.y+d*this.cellSize),S=new h(c.x+u*this.cellSize,c.y+-1*d*this.cellSize);if(m.setPosition(v),g.setPosition(S),i)null==(p=this.switchAnimation.callbacks)||p.revert();else null==(f=this.switchAnimation.callbacks)||f.end()}else{var w=this.switchAnimation.currentTime/this.switchAnimation.speed,B=new h(l.x+-1*u*this.cellSize*w,l.y+d*this.cellSize*w),C=new h(c.x+u*this.cellSize*w,c.y+-1*d*this.cellSize*w);m.setPosition(B),g.setPosition(C)}},e.fall=function(t,e){var i=this;if(this.fallAnimation.currentTime+=t,this.fallAnimation.currentTime>this.fallAnimation.speed){var o;this.fallAnimation.currentTime=0,e.forEach((function(t){t.item.setPosition(t.position.x,t.position.y-i.cellSize)})),null==(o=this.fallAnimation.callbacks)||o.end()}else{var n=this.fallAnimation.currentTime/this.fallAnimation.speed;e.forEach((function(t){t.item.setPosition(t.position.x,t.position.y-i.cellSize*n)}))}},e.moveToTarget=function(t,e){if(this.moveAnimation.currentTime+=t,this.moveAnimation.currentTime>this.moveAnimation.speed){var i;this.moveAnimation.currentTime=0,e.forEach((function(t){t.item.getComponent(v).hideBody(),t.item.setPosition(t.position)})),null==(i=this.moveAnimation.callbacks)||i.end()}else{var o=this.moveAnimation.currentTime/this.moveAnimation.speed;e.forEach((function(t){var e=new h(t.target.x*o,t.target.y*o);t.item.setPosition(t.position.x+e.x,t.position.y+e.y)}))}},t}();a._RF.pop()}}}));

System.register("chunks:///_virtual/BoardEffects.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"41328XvfV1A1pVma/nOD5EO","BoardEffects",void 0);t("BoardEffects",(function(){this.bombId=100}));c._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,a=e.Component}],execute:function(){var o;n._RF.push({},"0983eLTGkBGzYv65vE30r04","GameManager",void 0);var c=r.ccclass;r.property,e("GameManager",c("GameManager")(o=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var r=n.prototype;return r.start=function(){},r.update=function(e){},n}(a))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,o,a,s,l,u,p,c,h,m,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Node,l=e.Sprite,u=e.SpriteFrame,p=e.UITransform,c=e.instantiate,h=e.find,m=e.Animation,y=e.Component}],execute:function(){var b,d,T,S,f,E,A,v,g,L,_,C,F,D,I,z,w;o._RF.push({},"9569eYgJHlPTIfoOQPKQb3o","Item",void 0);var H=a.ccclass,M=a.property,k=e("ItemState",function(e){return e[e.STATE_DEFAULT=0]="STATE_DEFAULT",e[e.STATE_SELECTED=1]="STATE_SELECTED",e[e.STATE_SWITCH=2]="STATE_SWITCH",e[e.STATE_MATCHED=3]="STATE_MATCHED",e}({}));e("Item",(b=H("Item"),d=M({type:s}),T=M({type:s}),S=M({type:l}),f=M({type:[u]}),E=M({type:l}),A=M({type:[u]}),v=M({type:u}),b((_=t((L=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"parentElement",_,n(t)),r(t,"body",C,n(t)),r(t,"eye",F,n(t)),r(t,"eyeList",D,n(t)),r(t,"mouth",I,n(t)),r(t,"mouthList",z,n(t)),r(t,"bombSprite",w,n(t)),t.itemState=void 0,t.bodySprite=void 0,t.bodyImagesList=void 0,t.bodyTransform=void 0,t}i(t,e);var o=t.prototype;return o.setParent=function(e){this.parentElement=e},o.changeState=function(e){this.itemState=e,this.setMouth()},o.setItemData=function(e,t){void 0===t&&(t=!1),this.setBodySprite(e,t),t||this.changeState(k.STATE_DEFAULT)},o.setBodySprite=function(e,t){var i,r;if(void 0===t&&(t=!1),this.bodySprite=null==(i=this.body)?void 0:i.getComponent(l),this.bodyImagesList=null==(r=this.bodySprite)?void 0:r.spriteAtlas.getSpriteFrames(),this.bodySprite&&this.bodyImagesList){if(t)return this.eye.spriteFrame=null,this.mouth.spriteFrame=null,void(this.bodySprite.spriteFrame=this.bombSprite);this.bodySprite.spriteFrame=this.bodyImagesList[e],this.setEye(e)}},o.setEye=function(e){var t=0;switch(e){case 0:case 5:t=0;break;case 1:case 6:t=1;break;case 2:case 7:t=2;break;case 3:case 8:t=3;break;case 4:case 9:t=4}this.eye.spriteFrame=this.eyeList[t]},o.setMouth=function(){var e=0;switch(this.itemState){case k.STATE_DEFAULT:e=0;break;case k.STATE_SELECTED:e=1;break;case k.STATE_MATCHED:e=2;break;case k.STATE_SWITCH:e=0}this.mouth.spriteFrame=this.mouthList[e]},o.setBodySize=function(e){var t;this.bodyTransform=null==(t=this.body)?void 0:t.getComponent(p),this.bodyTransform&&this.bodyTransform.setContentSize(e,e)},o.playAnimationDead=function(){this.changeState(k.STATE_MATCHED);var e=c(this.node),t="dead"+Math.floor(3*Math.random()+1);this.parentElement?e.parent=this.parentElement:e.parent=h("Canvas"),e.getComponent(m).play(t),this.hideBody(),this.scheduleOnce((function(){e.destroy()}),2)},o.hideBody=function(){var e;this.bodySprite=null==(e=this.body)?void 0:e.getComponent(l),this.bodySprite.spriteFrame=null,this.eye.spriteFrame=null,this.mouth.spriteFrame=null},t}(y)).prototype,"parentElement",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(L.prototype,"body",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"eye",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(L.prototype,"eyeList",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(L.prototype,"mouth",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(L.prototype,"mouthList",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(L.prototype,"bombSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=L))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Board.ts","./BoardEffects.ts","./Item.ts","./AudioManager.ts","./GameManager.ts","./ScoreManager.ts"],(function(){return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/ScoreManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,o,r,a,c,s,l,u,h,b;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){a=e.cclegacy,c=e._decorator,s=e.Label,l=e.ProgressBar,u=e.Animation,h=e.Node,b=e.Component}],execute:function(){var p,m,f,S,g,y,w,C,d,L,v,_,T;a._RF.push({},"3717dzu13lJTKW9OHLpqsi4","ScoreManager",void 0);var z=c.ccclass,W=c.property;e("ScoreManager",(p=z("ScoreManager"),m=W({type:s}),f=W({type:l}),S=W({type:u}),g=W({type:h}),y=W({type:h}),p((d=i((C=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return i=e.call.apply(e,[this].concat(r))||this,n(i,"scoreLabel",d,o(i)),n(i,"scoreBar",L,o(i)),n(i,"animationController",v,o(i)),n(i,"winWindow",_,o(i)),n(i,"comboLabel",T,o(i)),i.score=0,i.combo=1,i.currentScaleTime=0,i.scaleTime=.3,i.isCanPlayScaleScore=!0,i._winScore=1,i._isWin=!1,i.plaingAnimationCount=0,i}t(i,e);var a=i.prototype;return a.update=function(e){this.combo>1&&this.isCanPlayScaleScore&&this.showCombo(e)},a.addScore=function(e){this.score+=e*this.combo,this.updateScoreLabel()},a.updateScoreLabel=function(){if(this.scoreLabel){this.score>this.winScore&&(this.score=this.winScore,this._isWin=!0,this.winWindow.active=!0);var e=this.score/this.winScore,i=Math.floor(100*e);if(this.animationController){var t="";switch(!0){case i>50&&i<70:t=0===this.plaingAnimationCount?"1":"";break;case i>=70&&i<90:t=1===this.plaingAnimationCount?"2":"";break;case i>90:t=2===this.plaingAnimationCount?"3":""}t&&(this.plaingAnimationCount++,this.animationController.play("winstep"+t))}this.scoreLabel.string=" "+i+"% ",this.scoreBar&&(this.scoreBar.progress=e)}},a.addCombo=function(){var e=this;if(this.comboLabel){this.combo+=1,this.isCanPlayScaleScore=!0,this.comboLabel.getComponent(s).string="COMBO X"+this.combo;var i=function(){e.combo=1,e.comboLabel.setScale(0,0)};this.unschedule(i),this.scheduleOnce(i,2)}},a.showCombo=function(e){if(this.currentScaleTime+=e,this.currentScaleTime>this.scaleTime)this.comboLabel.setScale(1,1),this.currentScaleTime=0,this.isCanPlayScaleScore=!1;else{var i=this.currentScaleTime/this.scaleTime;this.comboLabel.setScale(1*i,1*i)}},r(i,[{key:"winScore",get:function(){return this._winScore},set:function(e){(!Number.isInteger(e)||e<1)&&(this._winScore=1),this._winScore=e}},{key:"isWin",get:function(){return this._isWin}}]),i}(b)).prototype,"scoreLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(C.prototype,"scoreBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(C.prototype,"animationController",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(C.prototype,"winWindow",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(C.prototype,"comboLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=C))||w));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});